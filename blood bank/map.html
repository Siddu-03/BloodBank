<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Major Blood Banks in India</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="styles.css" /> <!-- Link to your new CSS file -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>
<body>
  <div class="page-container">
    <header>
      <div class="title-container">
        <h1><i class="fas fa-tint logo-icon"></i> Major Blood Banks in India</h1>
        <div class="header-actions">
          <a href="index.html" class="header-link"><i class="fas fa-home"></i> Home</a>
        </div>
      </div>
    </header>
    
    <div class="map-interface">
      <div id="map"></div>
      
      <div class="control-panel">
        <button class="panel-toggle">
          <i class="fas fa-chevron-left"></i>
        </button>
        
        <div class="search-container">
          <input type="text" class="search-box" placeholder="Search blood banks..." id="searchBox">
          <i class="fas fa-search search-icon"></i>
        </div>
        
        <div class="filters">
          <h3 class="filter-title">Filter by Region</h3>
          <div class="filter-options">
            <span class="filter-option active" data-region="all">All</span>
            <span class="filter-option" data-region="north">North</span>
            <span class="filter-option" data-region="south">South</span>
            <span class="filter-option" data-region="east">East</span>
            <span class="filter-option" data-region="west">West</span>
            <span class="filter-option" data-region="central">Central</span>
            <span class="filter-option" data-region="northeast">North-East</span>
          </div>
        </div>
        
        <h3 class="list-title">Blood Banks</h3>
        <ul class="blood-bank-list" id="bloodBankList">
          <!-- Blood bank list items will be generated by JavaScript -->
        </ul>
      </div>
    </div>
    
    <div class="map-controls">
      <button class="map-control-button" id="zoomInBtn">
        <i class="fas fa-plus map-control-icon"></i>
      </button>
      <button class="map-control-button" id="zoomOutBtn">
        <i class="fas fa-minus map-control-icon"></i>
      </button>
      <button class="map-control-button" id="recenterBtn">
        <i class="fas fa-location-arrow map-control-icon"></i>
      </button>
    </div>
    
    <div class="map-legend">
      <h4 class="legend-title">Legend</h4>
      <div class="legend-item">
        <span class="legend-color" style="background-color: #e63946;"></span>
        <span>Blood Bank Location</span>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Your existing JavaScript with some enhancements
    const map = L.map('map').setView([22.9734, 78.6569], 5); // Center on India
    
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);
    
    // Blood bank data with region information
    const bloodBanks = [
      // North India
      { name: "AIIMS – New Delhi", lat: 28.5665, lng: 77.2100, region: "north", contact: "+91-11-26588500", type: "Government" },
      { name: "Indian Red Cross Society – Delhi", lat: 28.6270, lng: 77.2167, region: "north", contact: "+91-11-23711551", type: "Non-Profit" },
      { name: "Safdarjung Hospital – Delhi", lat: 28.5689, lng: 77.2085, region: "north", contact: "+91-11-26707444", type: "Government" },
      { name: "PGIMER – Chandigarh", lat: 30.7333, lng: 76.7794, region: "north", contact: "+91-172-2747585", type: "Government" },
      { name: "Government Medical College – Jammu", lat: 32.7266, lng: 74.8570, region: "north", contact: "+91-191-2584247", type: "Government" },
      { name: "Dr. RML Hospital – Delhi", lat: 28.6304, lng: 77.2090, region: "north", contact: "+91-11-23404446", type: "Government" },
      
      // West India
      { name: "KEM Hospital – Mumbai", lat: 19.0176, lng: 72.8562, region: "west", contact: "+91-22-24107000", type: "Government" },
      { name: "Tata Memorial Hospital – Mumbai", lat: 18.9359, lng: 72.8355, region: "west", contact: "+91-22-24177000", type: "Trust" },
      { name: "Sion Hospital – Mumbai", lat: 19.0380, lng: 72.8598, region: "west", contact: "+91-22-24076381", type: "Government" },
      { name: "Ruby Hall Clinic – Pune", lat: 18.5286, lng: 73.8742, region: "west", contact: "+91-20-66459999", type: "Private" },
      { name: "Civil Hospital – Ahmedabad", lat: 23.0400, lng: 72.5700, region: "west", contact: "+91-79-22681023", type: "Government" },
      
      // South India
      { name: "Apollo Hospitals – Chennai", lat: 13.0604, lng: 80.2496, region: "south", contact: "+91-44-28290200", type: "Private" },
      { name: "Stanley Medical College – Chennai", lat: 13.1036, lng: 80.2874, region: "south", contact: "+91-44-25281347", type: "Government" },
      { name: "CMC – Vellore", lat: 12.9260, lng: 79.1353, region: "south", contact: "+91-416-2282010", type: "Trust" },
      { name: "St. John's Medical College – Bengaluru", lat: 12.9345, lng: 77.6236, region: "south", contact: "+91-80-22065000", type: "Trust" },
      { name: "Narayana Hrudayalaya – Bengaluru", lat: 12.8452, lng: 77.6605, region: "south", contact: "+91-80-71222222", type: "Private" },
      { name: "SCTIMST – Thiruvananthapuram", lat: 8.5241, lng: 76.9366, region: "south", contact: "+91-471-2524400", type: "Government" },
      { name: "Osmania General Hospital – Hyderabad", lat: 17.3713, lng: 78.4745, region: "south", contact: "+91-40-24600122", type: "Government" },
      { name: "Apollo Hospitals – Hyderabad", lat: 17.4369, lng: 78.3915, region: "south", contact: "+91-40-23607777", type: "Private" },
      
      // East India
      { name: "SCB Medical College – Cuttack", lat: 20.4625, lng: 85.8802, region: "east", contact: "+91-671-2414080", type: "Government" },
      { name: "Indira Gandhi Institute – Patna", lat: 25.6110, lng: 85.1440, region: "east", contact: "+91-612-2297099", type: "Government" },
      { name: "RIMS – Ranchi", lat: 23.3700, lng: 85.3256, region: "east", contact: "+91-651-2541533", type: "Government" },
      { name: "Nil Ratan Sircar Medical College – Kolkata", lat: 22.5697, lng: 88.3680, region: "east", contact: "+91-33-22891082", type: "Government" },
      { name: "RG Kar Medical College – Kolkata", lat: 22.5958, lng: 88.3778, region: "east", contact: "+91-33-25304557", type: "Government" },
      
      // Central India
      { name: "Gandhi Medical College – Bhopal", lat: 23.2335, lng: 77.4323, region: "central", contact: "+91-755-2540035", type: "Government" },
      { name: "Netaji Subhash Chandra Bose Medical College – Jabalpur", lat: 23.1815, lng: 79.9864, region: "central", contact: "+91-761-2370951", type: "Government" },
      { name: "MGM Medical College – Indore", lat: 22.7196, lng: 75.8577, region: "central", contact: "+91-731-2527383", type: "Government" },
      
      // North-East India
      { name: "Gauhati Medical College – Guwahati", lat: 26.1445, lng: 91.7362, region: "northeast", contact: "+91-361-2529457", type: "Government" },
      { name: "NEIGRIHMS – Shillong", lat: 25.6107, lng: 91.8968, region: "northeast", contact: "+91-364-2538013", type: "Government" },
      { name: "Agartala Government Medical College – Tripura", lat: 23.8315, lng: 91.2820, region: "northeast", contact: "+91-381-2356701", type: "Government" },
      
      // Uttar Pradesh & Others
      { name: "KGMU – Lucknow", lat: 26.8722, lng: 80.9346, region: "north", contact: "+91-522-2257540", type: "Government" },
      { name: "SGPGIMS – Lucknow", lat: 26.8467, lng: 80.9462, region: "north", contact: "+91-522-2494000", type: "Government" },
      { name: "SN Medical College – Agra", lat: 27.1751, lng: 78.0090, region: "north", contact: "+91-562-2260353", type: "Government" }
    ];
    
    // Create custom icon for markers
    const bloodIcon = L.divIcon({
      className: 'blood-marker-icon',
      html: '<span class="marker-icon-inner">B</span>',
      iconSize: [30, 30],
      iconAnchor: [15, 30],
      popupAnchor: [0, -30]
    });
    
    // Add markers and generate list
    const markers = {};
    const bloodBankList = document.getElementById('bloodBankList');
    
    bloodBanks.forEach(bank => {
      // Create marker
      const marker = L.marker([bank.lat, bank.lng], {icon: bloodIcon})
        .addTo(map)
        .bindPopup(createPopupContent(bank));
      
      markers[bank.name] = marker;
      
      // Create list item
      const listItem = document.createElement('li');
      listItem.className = 'blood-bank-item';
      listItem.innerHTML = `
        <div class="blood-bank-name">${bank.name}</div>
        <div class="blood-bank-region">${capitalizeFirstLetter(bank.region)} India</div>
      `;
      
      listItem.addEventListener('click', () => {
        map.setView([bank.lat, bank.lng], 14);
        marker.openPopup();
        
        // Highlight active item
        document.querySelectorAll('.blood-bank-item').forEach(item => {
          item.classList.remove('active');
        });
        listItem.classList.add('active');
      });
      
      bloodBankList.appendChild(listItem);
    });
    
    // Create popup content
    function createPopupContent(bank) {
      return `
        <div class="popup-content">
          <div class="popup-header">
            <h3 class="popup-title">${bank.name}</h3>
          </div>
          <div class="popup-body">
            <div class="popup-info">
              <span class="popup-label">Region:</span>
              <span class="popup-value">${capitalizeFirstLetter(bank.region)} India</span>
            </div>
            <div class="popup-info">
              <span class="popup-label">Type:</span>
              <span class="popup-value">${bank.type}</span>
            </div>
            <div class="popup-info">
              <span class="popup-label">Contact:</span>
              <span class="popup-value">${bank.contact}</span>
            </div>
            <div class="popup-buttons">
              <a href="#" class="popup-button">More Info</a>
              <a href="#" class="popup-button primary">Directions</a>
            </div>
          </div>
        </div>
      `;
    }
    
    // Utility function
    function capitalizeFirstLetter(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }
    
    // Search functionality
    const searchBox = document.getElementById('searchBox');
    searchBox.addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      const listItems = document.querySelectorAll('.blood-bank-item');
      
      listItems.forEach(item => {
        const bankName = item.querySelector('.blood-bank-name').textContent.toLowerCase();
        if (bankName.includes(searchTerm)) {
          item.style.display = 'block';
        } else {
          item.style.display = 'none';
        }
      });
    });
    
    // Region filter
    const filterOptions = document.querySelectorAll('.filter-option');
    filterOptions.forEach(option => {
      option.addEventListener('click', function() {
        // Update active state
        filterOptions.forEach(opt => opt.classList.remove('active'));
        this.classList.add('active');
        
        const selectedRegion = this.getAttribute('data-region');
        const listItems = document.querySelectorAll('.blood-bank-item');
        
        listItems.forEach((item, index) => {
          const bankRegion = bloodBanks[index].region;
          
          if (selectedRegion === 'all' || bankRegion === selectedRegion) {
            item.style.display = 'block';
          } else {
            item.style.display = 'none';
          }
        });
      });
    });
    
    // Panel toggle
    const panelToggle = document.querySelector('.panel-toggle');
    const controlPanel = document.querySelector('.control-panel');
    
    panelToggle.addEventListener('click', function() {
      controlPanel.classList.toggle('collapsed');
      this.querySelector('i').classList.toggle('fa-chevron-left');
      this.querySelector('i').classList.toggle('fa-chevron-right');
    });
    
    // Map controls
    document.getElementById('zoomInBtn').addEventListener('click', () => map.zoomIn());
    document.getElementById('zoomOutBtn').addEventListener('click', () => map.zoomOut());
    document.getElementById('recenterBtn').addEventListener('click', () => map.setView([22.9734, 78.6569], 5));
  </script>
</body>
</html>